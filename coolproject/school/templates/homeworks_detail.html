{% extends 'base.html' %}

{% block title %}{{ homework.subject.name }} - –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ - –®–∫–æ–ª–∞ ‚Ññ3{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h3>
            </div>
            <div class="card-body">
                <div class="mb-4">
                    <h4>{{ homework.subject.name }}</h4>
                    <span class="badge {% if homework.due_date < today %}bg-danger{% else %}bg-success{% endif %} fs-6">
                        {% if homework.due_date < today %}
                            –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ
                        {% else %}
                            –°—Ä–æ–∫ —Å–¥–∞—á–∏: {{ homework.due_date|date:"d.m.Y" }}
                        {% endif %}
                    </span>
                </div>

                <div class="mb-4">
                    <h6>–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è:</h6>
                    <div class="border p-3 bg-light rounded">
                        {{ homework.description|linebreaks }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>–ü—Ä–µ–¥–º–µ—Ç:</strong></td>
                                <td>{{ homework.subject.name }}</td>
                            </tr>
                            <tr>
                                <td><strong>–ö–ª–∞—Å—Å:</strong></td>
                                <td>{{ homework.class_group.grade }}{{ homework.class_group.letter }}</td>
                            </tr>
                            <tr>
                                <td><strong>–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å:</strong></td>
                                <td>
                                    {% if homework.class_group.class_teacher %}
                                        {{ homework.class_group.class_teacher }}
                                    {% else %}
                                        <span class="text-muted">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</span>
                                    {% endif %}
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>–ó–∞–¥–∞–Ω–æ:</strong></td>
                                <td>{{ homework.assigned_date|date:"d.m.Y" }}</td>
                            </tr>
                            <tr>
                                <td><strong>–°—Ä–æ–∫ —Å–¥–∞—á–∏:</strong></td>
                                <td class="{% if homework.due_date < today %}text-danger{% endif %}">
                                    {{ homework.due_date|date:"d.m.Y" }}
                                </td>
                            </tr>
                            <tr>
                                <td><strong>–°—Ç–∞—Ç—É—Å:</strong></td>
                                <td>
                                    {% if homework.due_date < today %}
                                        <span class="text-danger">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>
                                    {% else %}
                                        <span class="text-success">–ê–∫—Ç–∏–≤–Ω–æ</span>
                                    {% endif %}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Å–µ</h5>
            </div>
            <div class="card-body">
                <h6>–£—á–µ–Ω–∏–∫–∏ –∫–ª–∞—Å—Å–∞:</h6>
                {% if homework.class_group.student.all %}
                <div class="list-group list-group-flush">
                    {% for student in homework.class_group.student.all|slice:":5" %}
                    <div class="list-group-item border-0 px-0 py-2">
                        {{ student.surname }} {{ student.first_name }}
                    </div>
                    {% endfor %}
                    {% if homework.class_group.student.count > 5 %}
                    <div class="list-group-item border-0 px-0 py-2 text-muted">
                        –∏ –µ—â–µ {{ homework.class_group.student.count|add:"-5" }} —É—á–µ–Ω–∏–∫–æ–≤...
                    </div>
                    {% endif %}
                </div>
                {% else %}
                <p class="text-muted">–í –∫–ª–∞—Å—Å–µ –Ω–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤</p>
                {% endif %}
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">–î–µ–π—Å—Ç–≤–∏—è</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{% url 'homework_update' homework.pk %}" class="btn btn-warning">
                        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                    </a>
                    <a href="{% url 'homework_delete' homework.pk %}" class="btn btn-danger">
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                    </a>
                    <a href="{% url 'homework_list' %}" class="btn btn-secondary">
                        ‚Ü©Ô∏è –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}